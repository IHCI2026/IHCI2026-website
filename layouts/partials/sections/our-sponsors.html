{{ $sponsors := .sponsors }}
{{ $validSponsors := slice }}
{{ range $sponsor := $sponsors }}
    {{ if $sponsor.fullName }}
        {{ $validSponsors = $validSponsors | append $sponsor }}
    {{ end }}
{{- end }}

{{ if gt (len $validSponsors) 0 }}
    <div class="section-container">
        <section class="section section--short our-sponsors">
            <h1 class="heading heading--highlighted heading--centered">
                {{ T "sponsors_section.heading" }}
            </h1>
            <h2 class="heading heading--2 heading--centered">
                {{ T "sponsors_section.subheading" }}
            </h2>
            <div class="our-sponsors__carousel">
                <div class="our-sponsors__track">
                    {{ range $s := $validSponsors }}
                        <a href="{{ $s.url }}" target="_blank" rel="noopener noreferrer" class="our-sponsors__logo-link" title="{{ $s.fullName }}">
                            {{ $img := resources.Get $s.logo }}
                            {{ if $img }}
                                <img src="{{ $img.RelPermalink }}" alt="{{ $s.fullName }}" class="our-sponsors__logo" />
                            {{ else }}
                                <span class="our-sponsors__name">{{ $s.fullName }}</span>
                            {{ end }}
                        </a>
                    {{ end }}
                    {{/* Duplicate for seamless loop */}}
                    {{ range $s := $validSponsors }}
                        <a href="{{ $s.url }}" target="_blank" rel="noopener noreferrer" class="our-sponsors__logo-link" aria-hidden="true" title="{{ $s.fullName }}">
                            {{ $img := resources.Get $s.logo }}
                            {{ if $img }}
                                <img src="{{ $img.RelPermalink }}" alt="{{ $s.fullName }}" class="our-sponsors__logo" />
                            {{ else }}
                                <span class="our-sponsors__name">{{ $s.fullName }}</span>
                            {{ end }}
                        </a>
                    {{ end }}
                </div>
            </div>
        </section>
    </div>
{{ end }}
